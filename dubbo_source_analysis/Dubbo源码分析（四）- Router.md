## Dubbo源码分析（三） - Router



服务路由：包含一条路由规则，路由规则决定了服务消费者的调用目标，即规定了服务消费者可调用哪些服务提供者

Dubbo 目前提供了三种服务路由实现：

- 条件路由 ConditionRouter
- 脚本路由 ScriptRouter
- 标签路由 TagRouter



##### 条件路由：（ConditionRouter）

条件路由规则的格式如下：

```
[服务消费者匹配条件] => [服务提供者匹配条件]
```

比如有这样一条规则：

```
// 该条规则表示 IP 为 10.20.153.10 的服务消费者**只可**调用 IP 为 10.20.153.11 机器上的服务，不可调用其他机器上的服务
host = 10.20.153.10 => host = 10.20.153.11
```



- 表达式解析（init）
  - 先从URL中获取路由配置信息（ConditionRouter构造器）
    - priority：优先级
    - force：是否强制返回空路由列表
    - enabled：是否开启
    - rule：路由规则字符串
  - 解析rule规则（parseRule）
  - 路由Chain进行route
    - 匹配服务消费者规则
    - 匹配服务提供者规则

